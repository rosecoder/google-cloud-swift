// Copyright 2024 Google LLC
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

// DO NOT EDIT.
// swift-format-ignore-file
//
// Generated by the gRPC Swift generator plugin for the protocol buffer compiler.
// Source: google/datastore/v1/datastore.proto
//
// For information on using the generated types, please see the documentation:
//   https://github.com/grpc/grpc-swift

import GRPCCore
import GRPCProtobuf

internal enum Google_Datastore_V1_Datastore {
    internal static let descriptor = GRPCCore.ServiceDescriptor.google_datastore_v1_Datastore
    internal enum Method {
        internal enum Lookup {
            internal typealias Input = Google_Datastore_V1_LookupRequest
            internal typealias Output = Google_Datastore_V1_LookupResponse
            internal static let descriptor = GRPCCore.MethodDescriptor(
                service: Google_Datastore_V1_Datastore.descriptor.fullyQualifiedService,
                method: "Lookup"
            )
        }
        internal enum RunQuery {
            internal typealias Input = Google_Datastore_V1_RunQueryRequest
            internal typealias Output = Google_Datastore_V1_RunQueryResponse
            internal static let descriptor = GRPCCore.MethodDescriptor(
                service: Google_Datastore_V1_Datastore.descriptor.fullyQualifiedService,
                method: "RunQuery"
            )
        }
        internal enum RunAggregationQuery {
            internal typealias Input = Google_Datastore_V1_RunAggregationQueryRequest
            internal typealias Output = Google_Datastore_V1_RunAggregationQueryResponse
            internal static let descriptor = GRPCCore.MethodDescriptor(
                service: Google_Datastore_V1_Datastore.descriptor.fullyQualifiedService,
                method: "RunAggregationQuery"
            )
        }
        internal enum BeginTransaction {
            internal typealias Input = Google_Datastore_V1_BeginTransactionRequest
            internal typealias Output = Google_Datastore_V1_BeginTransactionResponse
            internal static let descriptor = GRPCCore.MethodDescriptor(
                service: Google_Datastore_V1_Datastore.descriptor.fullyQualifiedService,
                method: "BeginTransaction"
            )
        }
        internal enum Commit {
            internal typealias Input = Google_Datastore_V1_CommitRequest
            internal typealias Output = Google_Datastore_V1_CommitResponse
            internal static let descriptor = GRPCCore.MethodDescriptor(
                service: Google_Datastore_V1_Datastore.descriptor.fullyQualifiedService,
                method: "Commit"
            )
        }
        internal enum Rollback {
            internal typealias Input = Google_Datastore_V1_RollbackRequest
            internal typealias Output = Google_Datastore_V1_RollbackResponse
            internal static let descriptor = GRPCCore.MethodDescriptor(
                service: Google_Datastore_V1_Datastore.descriptor.fullyQualifiedService,
                method: "Rollback"
            )
        }
        internal enum AllocateIds {
            internal typealias Input = Google_Datastore_V1_AllocateIdsRequest
            internal typealias Output = Google_Datastore_V1_AllocateIdsResponse
            internal static let descriptor = GRPCCore.MethodDescriptor(
                service: Google_Datastore_V1_Datastore.descriptor.fullyQualifiedService,
                method: "AllocateIds"
            )
        }
        internal enum ReserveIds {
            internal typealias Input = Google_Datastore_V1_ReserveIdsRequest
            internal typealias Output = Google_Datastore_V1_ReserveIdsResponse
            internal static let descriptor = GRPCCore.MethodDescriptor(
                service: Google_Datastore_V1_Datastore.descriptor.fullyQualifiedService,
                method: "ReserveIds"
            )
        }
        internal static let descriptors: [GRPCCore.MethodDescriptor] = [
            Lookup.descriptor,
            RunQuery.descriptor,
            RunAggregationQuery.descriptor,
            BeginTransaction.descriptor,
            Commit.descriptor,
            Rollback.descriptor,
            AllocateIds.descriptor,
            ReserveIds.descriptor
        ]
    }
    @available(macOS 15.0, iOS 18.0, watchOS 11.0, tvOS 18.0, visionOS 2.0, *)
    internal typealias ClientProtocol = Google_Datastore_V1_Datastore_ClientProtocol
    @available(macOS 15.0, iOS 18.0, watchOS 11.0, tvOS 18.0, visionOS 2.0, *)
    internal typealias Client = Google_Datastore_V1_Datastore_Client
}

extension GRPCCore.ServiceDescriptor {
    internal static let google_datastore_v1_Datastore = Self(
        package: "google.datastore.v1",
        service: "Datastore"
    )
}

/// Each RPC normalizes the partition IDs of the keys in its input entities,
/// and always returns entities with keys with normalized partition IDs.
/// This applies to all keys and entities, including those in values, except keys
/// with both an empty path and an empty or unset partition ID. Normalization of
/// input keys sets the project ID (if not already set) to the project ID from
/// the request.
@available(macOS 15.0, iOS 18.0, watchOS 11.0, tvOS 18.0, visionOS 2.0, *)
internal protocol Google_Datastore_V1_Datastore_ClientProtocol: Sendable {
    /// Looks up entities by key.
    func lookup<R>(
        request: GRPCCore.ClientRequest<Google_Datastore_V1_LookupRequest>,
        serializer: some GRPCCore.MessageSerializer<Google_Datastore_V1_LookupRequest>,
        deserializer: some GRPCCore.MessageDeserializer<Google_Datastore_V1_LookupResponse>,
        options: GRPCCore.CallOptions,
        _ body: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_LookupResponse>) async throws -> R
    ) async throws -> R where R: Sendable
    
    /// Queries for entities.
    func runQuery<R>(
        request: GRPCCore.ClientRequest<Google_Datastore_V1_RunQueryRequest>,
        serializer: some GRPCCore.MessageSerializer<Google_Datastore_V1_RunQueryRequest>,
        deserializer: some GRPCCore.MessageDeserializer<Google_Datastore_V1_RunQueryResponse>,
        options: GRPCCore.CallOptions,
        _ body: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_RunQueryResponse>) async throws -> R
    ) async throws -> R where R: Sendable
    
    /// Runs an aggregation query.
    func runAggregationQuery<R>(
        request: GRPCCore.ClientRequest<Google_Datastore_V1_RunAggregationQueryRequest>,
        serializer: some GRPCCore.MessageSerializer<Google_Datastore_V1_RunAggregationQueryRequest>,
        deserializer: some GRPCCore.MessageDeserializer<Google_Datastore_V1_RunAggregationQueryResponse>,
        options: GRPCCore.CallOptions,
        _ body: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_RunAggregationQueryResponse>) async throws -> R
    ) async throws -> R where R: Sendable
    
    /// Begins a new transaction.
    func beginTransaction<R>(
        request: GRPCCore.ClientRequest<Google_Datastore_V1_BeginTransactionRequest>,
        serializer: some GRPCCore.MessageSerializer<Google_Datastore_V1_BeginTransactionRequest>,
        deserializer: some GRPCCore.MessageDeserializer<Google_Datastore_V1_BeginTransactionResponse>,
        options: GRPCCore.CallOptions,
        _ body: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_BeginTransactionResponse>) async throws -> R
    ) async throws -> R where R: Sendable
    
    /// Commits a transaction, optionally creating, deleting or modifying some
    /// entities.
    func commit<R>(
        request: GRPCCore.ClientRequest<Google_Datastore_V1_CommitRequest>,
        serializer: some GRPCCore.MessageSerializer<Google_Datastore_V1_CommitRequest>,
        deserializer: some GRPCCore.MessageDeserializer<Google_Datastore_V1_CommitResponse>,
        options: GRPCCore.CallOptions,
        _ body: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_CommitResponse>) async throws -> R
    ) async throws -> R where R: Sendable
    
    /// Rolls back a transaction.
    func rollback<R>(
        request: GRPCCore.ClientRequest<Google_Datastore_V1_RollbackRequest>,
        serializer: some GRPCCore.MessageSerializer<Google_Datastore_V1_RollbackRequest>,
        deserializer: some GRPCCore.MessageDeserializer<Google_Datastore_V1_RollbackResponse>,
        options: GRPCCore.CallOptions,
        _ body: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_RollbackResponse>) async throws -> R
    ) async throws -> R where R: Sendable
    
    /// Allocates IDs for the given keys, which is useful for referencing an entity
    /// before it is inserted.
    func allocateIds<R>(
        request: GRPCCore.ClientRequest<Google_Datastore_V1_AllocateIdsRequest>,
        serializer: some GRPCCore.MessageSerializer<Google_Datastore_V1_AllocateIdsRequest>,
        deserializer: some GRPCCore.MessageDeserializer<Google_Datastore_V1_AllocateIdsResponse>,
        options: GRPCCore.CallOptions,
        _ body: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_AllocateIdsResponse>) async throws -> R
    ) async throws -> R where R: Sendable
    
    /// Prevents the supplied keys' IDs from being auto-allocated by Cloud
    /// Datastore.
    func reserveIds<R>(
        request: GRPCCore.ClientRequest<Google_Datastore_V1_ReserveIdsRequest>,
        serializer: some GRPCCore.MessageSerializer<Google_Datastore_V1_ReserveIdsRequest>,
        deserializer: some GRPCCore.MessageDeserializer<Google_Datastore_V1_ReserveIdsResponse>,
        options: GRPCCore.CallOptions,
        _ body: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_ReserveIdsResponse>) async throws -> R
    ) async throws -> R where R: Sendable
}

@available(macOS 15.0, iOS 18.0, watchOS 11.0, tvOS 18.0, visionOS 2.0, *)
extension Google_Datastore_V1_Datastore.ClientProtocol {
    internal func lookup<R>(
        request: GRPCCore.ClientRequest<Google_Datastore_V1_LookupRequest>,
        options: GRPCCore.CallOptions = .defaults,
        _ body: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_LookupResponse>) async throws -> R = {
            try $0.message
        }
    ) async throws -> R where R: Sendable {
        try await self.lookup(
            request: request,
            serializer: GRPCProtobuf.ProtobufSerializer<Google_Datastore_V1_LookupRequest>(),
            deserializer: GRPCProtobuf.ProtobufDeserializer<Google_Datastore_V1_LookupResponse>(),
            options: options,
            body
        )
    }
    
    internal func runQuery<R>(
        request: GRPCCore.ClientRequest<Google_Datastore_V1_RunQueryRequest>,
        options: GRPCCore.CallOptions = .defaults,
        _ body: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_RunQueryResponse>) async throws -> R = {
            try $0.message
        }
    ) async throws -> R where R: Sendable {
        try await self.runQuery(
            request: request,
            serializer: GRPCProtobuf.ProtobufSerializer<Google_Datastore_V1_RunQueryRequest>(),
            deserializer: GRPCProtobuf.ProtobufDeserializer<Google_Datastore_V1_RunQueryResponse>(),
            options: options,
            body
        )
    }
    
    internal func runAggregationQuery<R>(
        request: GRPCCore.ClientRequest<Google_Datastore_V1_RunAggregationQueryRequest>,
        options: GRPCCore.CallOptions = .defaults,
        _ body: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_RunAggregationQueryResponse>) async throws -> R = {
            try $0.message
        }
    ) async throws -> R where R: Sendable {
        try await self.runAggregationQuery(
            request: request,
            serializer: GRPCProtobuf.ProtobufSerializer<Google_Datastore_V1_RunAggregationQueryRequest>(),
            deserializer: GRPCProtobuf.ProtobufDeserializer<Google_Datastore_V1_RunAggregationQueryResponse>(),
            options: options,
            body
        )
    }
    
    internal func beginTransaction<R>(
        request: GRPCCore.ClientRequest<Google_Datastore_V1_BeginTransactionRequest>,
        options: GRPCCore.CallOptions = .defaults,
        _ body: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_BeginTransactionResponse>) async throws -> R = {
            try $0.message
        }
    ) async throws -> R where R: Sendable {
        try await self.beginTransaction(
            request: request,
            serializer: GRPCProtobuf.ProtobufSerializer<Google_Datastore_V1_BeginTransactionRequest>(),
            deserializer: GRPCProtobuf.ProtobufDeserializer<Google_Datastore_V1_BeginTransactionResponse>(),
            options: options,
            body
        )
    }
    
    internal func commit<R>(
        request: GRPCCore.ClientRequest<Google_Datastore_V1_CommitRequest>,
        options: GRPCCore.CallOptions = .defaults,
        _ body: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_CommitResponse>) async throws -> R = {
            try $0.message
        }
    ) async throws -> R where R: Sendable {
        try await self.commit(
            request: request,
            serializer: GRPCProtobuf.ProtobufSerializer<Google_Datastore_V1_CommitRequest>(),
            deserializer: GRPCProtobuf.ProtobufDeserializer<Google_Datastore_V1_CommitResponse>(),
            options: options,
            body
        )
    }
    
    internal func rollback<R>(
        request: GRPCCore.ClientRequest<Google_Datastore_V1_RollbackRequest>,
        options: GRPCCore.CallOptions = .defaults,
        _ body: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_RollbackResponse>) async throws -> R = {
            try $0.message
        }
    ) async throws -> R where R: Sendable {
        try await self.rollback(
            request: request,
            serializer: GRPCProtobuf.ProtobufSerializer<Google_Datastore_V1_RollbackRequest>(),
            deserializer: GRPCProtobuf.ProtobufDeserializer<Google_Datastore_V1_RollbackResponse>(),
            options: options,
            body
        )
    }
    
    internal func allocateIds<R>(
        request: GRPCCore.ClientRequest<Google_Datastore_V1_AllocateIdsRequest>,
        options: GRPCCore.CallOptions = .defaults,
        _ body: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_AllocateIdsResponse>) async throws -> R = {
            try $0.message
        }
    ) async throws -> R where R: Sendable {
        try await self.allocateIds(
            request: request,
            serializer: GRPCProtobuf.ProtobufSerializer<Google_Datastore_V1_AllocateIdsRequest>(),
            deserializer: GRPCProtobuf.ProtobufDeserializer<Google_Datastore_V1_AllocateIdsResponse>(),
            options: options,
            body
        )
    }
    
    internal func reserveIds<R>(
        request: GRPCCore.ClientRequest<Google_Datastore_V1_ReserveIdsRequest>,
        options: GRPCCore.CallOptions = .defaults,
        _ body: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_ReserveIdsResponse>) async throws -> R = {
            try $0.message
        }
    ) async throws -> R where R: Sendable {
        try await self.reserveIds(
            request: request,
            serializer: GRPCProtobuf.ProtobufSerializer<Google_Datastore_V1_ReserveIdsRequest>(),
            deserializer: GRPCProtobuf.ProtobufDeserializer<Google_Datastore_V1_ReserveIdsResponse>(),
            options: options,
            body
        )
    }
}

@available(macOS 15.0, iOS 18.0, watchOS 11.0, tvOS 18.0, visionOS 2.0, *)
extension Google_Datastore_V1_Datastore.ClientProtocol {
    /// Looks up entities by key.
    internal func lookup<Result>(
        _ message: Google_Datastore_V1_LookupRequest,
        metadata: GRPCCore.Metadata = [:],
        options: GRPCCore.CallOptions = .defaults,
        onResponse handleResponse: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_LookupResponse>) async throws -> Result = {
            try $0.message
        }
    ) async throws -> Result where Result: Sendable {
        let request = GRPCCore.ClientRequest<Google_Datastore_V1_LookupRequest>(
            message: message,
            metadata: metadata
        )
        return try await self.lookup(
            request: request,
            options: options,
            handleResponse
        )
    }
    
    /// Queries for entities.
    internal func runQuery<Result>(
        _ message: Google_Datastore_V1_RunQueryRequest,
        metadata: GRPCCore.Metadata = [:],
        options: GRPCCore.CallOptions = .defaults,
        onResponse handleResponse: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_RunQueryResponse>) async throws -> Result = {
            try $0.message
        }
    ) async throws -> Result where Result: Sendable {
        let request = GRPCCore.ClientRequest<Google_Datastore_V1_RunQueryRequest>(
            message: message,
            metadata: metadata
        )
        return try await self.runQuery(
            request: request,
            options: options,
            handleResponse
        )
    }
    
    /// Runs an aggregation query.
    internal func runAggregationQuery<Result>(
        _ message: Google_Datastore_V1_RunAggregationQueryRequest,
        metadata: GRPCCore.Metadata = [:],
        options: GRPCCore.CallOptions = .defaults,
        onResponse handleResponse: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_RunAggregationQueryResponse>) async throws -> Result = {
            try $0.message
        }
    ) async throws -> Result where Result: Sendable {
        let request = GRPCCore.ClientRequest<Google_Datastore_V1_RunAggregationQueryRequest>(
            message: message,
            metadata: metadata
        )
        return try await self.runAggregationQuery(
            request: request,
            options: options,
            handleResponse
        )
    }
    
    /// Begins a new transaction.
    internal func beginTransaction<Result>(
        _ message: Google_Datastore_V1_BeginTransactionRequest,
        metadata: GRPCCore.Metadata = [:],
        options: GRPCCore.CallOptions = .defaults,
        onResponse handleResponse: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_BeginTransactionResponse>) async throws -> Result = {
            try $0.message
        }
    ) async throws -> Result where Result: Sendable {
        let request = GRPCCore.ClientRequest<Google_Datastore_V1_BeginTransactionRequest>(
            message: message,
            metadata: metadata
        )
        return try await self.beginTransaction(
            request: request,
            options: options,
            handleResponse
        )
    }
    
    /// Commits a transaction, optionally creating, deleting or modifying some
    /// entities.
    internal func commit<Result>(
        _ message: Google_Datastore_V1_CommitRequest,
        metadata: GRPCCore.Metadata = [:],
        options: GRPCCore.CallOptions = .defaults,
        onResponse handleResponse: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_CommitResponse>) async throws -> Result = {
            try $0.message
        }
    ) async throws -> Result where Result: Sendable {
        let request = GRPCCore.ClientRequest<Google_Datastore_V1_CommitRequest>(
            message: message,
            metadata: metadata
        )
        return try await self.commit(
            request: request,
            options: options,
            handleResponse
        )
    }
    
    /// Rolls back a transaction.
    internal func rollback<Result>(
        _ message: Google_Datastore_V1_RollbackRequest,
        metadata: GRPCCore.Metadata = [:],
        options: GRPCCore.CallOptions = .defaults,
        onResponse handleResponse: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_RollbackResponse>) async throws -> Result = {
            try $0.message
        }
    ) async throws -> Result where Result: Sendable {
        let request = GRPCCore.ClientRequest<Google_Datastore_V1_RollbackRequest>(
            message: message,
            metadata: metadata
        )
        return try await self.rollback(
            request: request,
            options: options,
            handleResponse
        )
    }
    
    /// Allocates IDs for the given keys, which is useful for referencing an entity
    /// before it is inserted.
    internal func allocateIds<Result>(
        _ message: Google_Datastore_V1_AllocateIdsRequest,
        metadata: GRPCCore.Metadata = [:],
        options: GRPCCore.CallOptions = .defaults,
        onResponse handleResponse: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_AllocateIdsResponse>) async throws -> Result = {
            try $0.message
        }
    ) async throws -> Result where Result: Sendable {
        let request = GRPCCore.ClientRequest<Google_Datastore_V1_AllocateIdsRequest>(
            message: message,
            metadata: metadata
        )
        return try await self.allocateIds(
            request: request,
            options: options,
            handleResponse
        )
    }
    
    /// Prevents the supplied keys' IDs from being auto-allocated by Cloud
    /// Datastore.
    internal func reserveIds<Result>(
        _ message: Google_Datastore_V1_ReserveIdsRequest,
        metadata: GRPCCore.Metadata = [:],
        options: GRPCCore.CallOptions = .defaults,
        onResponse handleResponse: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_ReserveIdsResponse>) async throws -> Result = {
            try $0.message
        }
    ) async throws -> Result where Result: Sendable {
        let request = GRPCCore.ClientRequest<Google_Datastore_V1_ReserveIdsRequest>(
            message: message,
            metadata: metadata
        )
        return try await self.reserveIds(
            request: request,
            options: options,
            handleResponse
        )
    }
}

/// Each RPC normalizes the partition IDs of the keys in its input entities,
/// and always returns entities with keys with normalized partition IDs.
/// This applies to all keys and entities, including those in values, except keys
/// with both an empty path and an empty or unset partition ID. Normalization of
/// input keys sets the project ID (if not already set) to the project ID from
/// the request.
@available(macOS 15.0, iOS 18.0, watchOS 11.0, tvOS 18.0, visionOS 2.0, *)
internal struct Google_Datastore_V1_Datastore_Client: Google_Datastore_V1_Datastore.ClientProtocol {
    private let client: GRPCCore.GRPCClient
    
    internal init(wrapping client: GRPCCore.GRPCClient) {
        self.client = client
    }
    
    /// Looks up entities by key.
    internal func lookup<R>(
        request: GRPCCore.ClientRequest<Google_Datastore_V1_LookupRequest>,
        serializer: some GRPCCore.MessageSerializer<Google_Datastore_V1_LookupRequest>,
        deserializer: some GRPCCore.MessageDeserializer<Google_Datastore_V1_LookupResponse>,
        options: GRPCCore.CallOptions = .defaults,
        _ body: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_LookupResponse>) async throws -> R = {
            try $0.message
        }
    ) async throws -> R where R: Sendable {
        try await self.client.unary(
            request: request,
            descriptor: Google_Datastore_V1_Datastore.Method.Lookup.descriptor,
            serializer: serializer,
            deserializer: deserializer,
            options: options,
            handler: body
        )
    }
    
    /// Queries for entities.
    internal func runQuery<R>(
        request: GRPCCore.ClientRequest<Google_Datastore_V1_RunQueryRequest>,
        serializer: some GRPCCore.MessageSerializer<Google_Datastore_V1_RunQueryRequest>,
        deserializer: some GRPCCore.MessageDeserializer<Google_Datastore_V1_RunQueryResponse>,
        options: GRPCCore.CallOptions = .defaults,
        _ body: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_RunQueryResponse>) async throws -> R = {
            try $0.message
        }
    ) async throws -> R where R: Sendable {
        try await self.client.unary(
            request: request,
            descriptor: Google_Datastore_V1_Datastore.Method.RunQuery.descriptor,
            serializer: serializer,
            deserializer: deserializer,
            options: options,
            handler: body
        )
    }
    
    /// Runs an aggregation query.
    internal func runAggregationQuery<R>(
        request: GRPCCore.ClientRequest<Google_Datastore_V1_RunAggregationQueryRequest>,
        serializer: some GRPCCore.MessageSerializer<Google_Datastore_V1_RunAggregationQueryRequest>,
        deserializer: some GRPCCore.MessageDeserializer<Google_Datastore_V1_RunAggregationQueryResponse>,
        options: GRPCCore.CallOptions = .defaults,
        _ body: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_RunAggregationQueryResponse>) async throws -> R = {
            try $0.message
        }
    ) async throws -> R where R: Sendable {
        try await self.client.unary(
            request: request,
            descriptor: Google_Datastore_V1_Datastore.Method.RunAggregationQuery.descriptor,
            serializer: serializer,
            deserializer: deserializer,
            options: options,
            handler: body
        )
    }
    
    /// Begins a new transaction.
    internal func beginTransaction<R>(
        request: GRPCCore.ClientRequest<Google_Datastore_V1_BeginTransactionRequest>,
        serializer: some GRPCCore.MessageSerializer<Google_Datastore_V1_BeginTransactionRequest>,
        deserializer: some GRPCCore.MessageDeserializer<Google_Datastore_V1_BeginTransactionResponse>,
        options: GRPCCore.CallOptions = .defaults,
        _ body: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_BeginTransactionResponse>) async throws -> R = {
            try $0.message
        }
    ) async throws -> R where R: Sendable {
        try await self.client.unary(
            request: request,
            descriptor: Google_Datastore_V1_Datastore.Method.BeginTransaction.descriptor,
            serializer: serializer,
            deserializer: deserializer,
            options: options,
            handler: body
        )
    }
    
    /// Commits a transaction, optionally creating, deleting or modifying some
    /// entities.
    internal func commit<R>(
        request: GRPCCore.ClientRequest<Google_Datastore_V1_CommitRequest>,
        serializer: some GRPCCore.MessageSerializer<Google_Datastore_V1_CommitRequest>,
        deserializer: some GRPCCore.MessageDeserializer<Google_Datastore_V1_CommitResponse>,
        options: GRPCCore.CallOptions = .defaults,
        _ body: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_CommitResponse>) async throws -> R = {
            try $0.message
        }
    ) async throws -> R where R: Sendable {
        try await self.client.unary(
            request: request,
            descriptor: Google_Datastore_V1_Datastore.Method.Commit.descriptor,
            serializer: serializer,
            deserializer: deserializer,
            options: options,
            handler: body
        )
    }
    
    /// Rolls back a transaction.
    internal func rollback<R>(
        request: GRPCCore.ClientRequest<Google_Datastore_V1_RollbackRequest>,
        serializer: some GRPCCore.MessageSerializer<Google_Datastore_V1_RollbackRequest>,
        deserializer: some GRPCCore.MessageDeserializer<Google_Datastore_V1_RollbackResponse>,
        options: GRPCCore.CallOptions = .defaults,
        _ body: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_RollbackResponse>) async throws -> R = {
            try $0.message
        }
    ) async throws -> R where R: Sendable {
        try await self.client.unary(
            request: request,
            descriptor: Google_Datastore_V1_Datastore.Method.Rollback.descriptor,
            serializer: serializer,
            deserializer: deserializer,
            options: options,
            handler: body
        )
    }
    
    /// Allocates IDs for the given keys, which is useful for referencing an entity
    /// before it is inserted.
    internal func allocateIds<R>(
        request: GRPCCore.ClientRequest<Google_Datastore_V1_AllocateIdsRequest>,
        serializer: some GRPCCore.MessageSerializer<Google_Datastore_V1_AllocateIdsRequest>,
        deserializer: some GRPCCore.MessageDeserializer<Google_Datastore_V1_AllocateIdsResponse>,
        options: GRPCCore.CallOptions = .defaults,
        _ body: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_AllocateIdsResponse>) async throws -> R = {
            try $0.message
        }
    ) async throws -> R where R: Sendable {
        try await self.client.unary(
            request: request,
            descriptor: Google_Datastore_V1_Datastore.Method.AllocateIds.descriptor,
            serializer: serializer,
            deserializer: deserializer,
            options: options,
            handler: body
        )
    }
    
    /// Prevents the supplied keys' IDs from being auto-allocated by Cloud
    /// Datastore.
    internal func reserveIds<R>(
        request: GRPCCore.ClientRequest<Google_Datastore_V1_ReserveIdsRequest>,
        serializer: some GRPCCore.MessageSerializer<Google_Datastore_V1_ReserveIdsRequest>,
        deserializer: some GRPCCore.MessageDeserializer<Google_Datastore_V1_ReserveIdsResponse>,
        options: GRPCCore.CallOptions = .defaults,
        _ body: @Sendable @escaping (GRPCCore.ClientResponse<Google_Datastore_V1_ReserveIdsResponse>) async throws -> R = {
            try $0.message
        }
    ) async throws -> R where R: Sendable {
        try await self.client.unary(
            request: request,
            descriptor: Google_Datastore_V1_Datastore.Method.ReserveIds.descriptor,
            serializer: serializer,
            deserializer: deserializer,
            options: options,
            handler: body
        )
    }
}